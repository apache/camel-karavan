karavan.version=3.18.5

# Git repository Configuration
karavan.projects-git-repository=${GIT_REPOSITORY}
karavan.projects-git-username=${GIT_USERNAME}
karavan.projects-git-password=${GIT_TOKEN}
karavan.projects-git-branch=main

# Git repository Configuration for custom Kamelets
karavan.kamelets-git-repository=${KAMELETS_GIT_REPOSITORY}
karavan.kamelets-git-username=${GIT_USERNAME}
karavan.kamelets-git-password=${GIT_TOKEN}
karavan.kamelets-git-branch=main

# Projects configuration
karavan.config.group-id=org.camel.karavan.demo
karavan.config.image-group=karavan
karavan.config.runtime=QUARKUS
karavan.config.runtime-version=2.13.3.Final
karavan.config.status-threshold=2000

karavan.config.environments[0].name=dev
karavan.config.environments[0].namespace=karavan
karavan.config.environments[0].pipeline=karavan-quarkus
karavan.config.environments[0].cluster=svc.cluster.local
karavan.config.environments[0].active=true

karavan.config.environments[1].name=test
karavan.config.environments[1].namespace=test
karavan.config.environments[1].pipeline=karavan-quarkus
karavan.config.environments[1].cluster=svc.cluster.local
karavan.config.environments[1].active=false

karavan.config.environments[2].name=prod
karavan.config.environments[2].namespace=prod
karavan.config.environments[2].pipeline=karavan-quarkus
karavan.config.environments[2].cluster=svc.cluster.local
karavan.config.environments[2].active=false

%dev.karavan.config.environments[0].cluster=apps.home.myocp.net 
%dev.karavan.config.environments[1].cluster=apps.home.myocp.net
%dev.karavan.config.environments[2].cluster=apps.home.myocp.net

# Infinispan Server address
#quarkus.infinispan-client.server-list=localhost:12345
quarkus.infinispan-client.devservices.enabled=false
quarkus.infinispan-client.devservices.port=12345
quarkus.infinispan-client.devservices.service-name=karavan
# Authentication
quarkus.infinispan-client.auth-username=admin
quarkus.infinispan-client.auth-password=password

# Infinispan client intelligence
# Use BASIC as a Docker for Mac workaround
quarkus.infinispan-client.client-intelligence=BASIC

# Public Dev
%dev.karavan.auth=public
%dev.quarkus.oidc.enabled=false
%dev.quarkus.http.auth.basic=false
%dev.quarkus.security.users.embedded.enabled=false
%dev.quarkus.http.auth.permission.authenticated.enabled=false
%dev.quarkus.http.auth.permission.public.enabled=false

# Public
%public.karavan.auth=public
%public.quarkus.oidc.enabled=false
%public.quarkus.http.auth.basic=false
%public.quarkus.security.users.embedded.enabled=false
%public.quarkus.http.auth.permission.authenticated.enabled=false
%public.quarkus.http.auth.permission.public.enabled=false

# Authentication
quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated

quarkus.http.auth.permission.public.paths=/public/*,/static/*,/*.map,/*.css,/*.js,/*.png,/*.html,/*.woff2,/*.ico,/robots.txt
quarkus.http.auth.permission.public.policy=permit
quarkus.http.auth.permission.public.methods=GET,HEAD,POST

# SSO Authentication
%oidc.karavan.auth=oidc
%oidc.quarkus.oidc.enabled=true
%oidc.quarkus.http.auth.basic=false
%oidc.quarkus.security.users.embedded.enabled=false
%oidc.karavan.frontend.auth-server-url=${oidc-frontend-url}
%oidc.quarkus.oidc.auth-server-url=${oidc-server-url}
%oidc.quarkus.oidc.client-id=karavan-backend
%oidc.quarkus.oidc.credentials.secret=${oidc-secret}
%oidc.quarkus.oidc.application-type=service
%oidc.quarkus.oidc.tls.verification=none
%oidc.quarkus.oidc.roles.source=accesstoken
%oidc.quarkus.oidc.authentication.user-info-required=true
quarkus.keycloak.devservices.enabled=false

# Basic Authentication
%basic.karavan.auth=basic
%basic.quarkus.oidc.enabled=false
%basic.quarkus.http.auth.basic=true
%basic.quarkus.http.auth.permission.authenticated.enabled=true
%basic.quarkus.http.auth.permission.public.enabled=true
%basic.quarkus.security.users.embedded.enabled=true
%basic.quarkus.security.users.embedded.plain-text=true
%basic.quarkus.security.users.embedded.users.admin=${master-password}
%basic.quarkus.security.users.embedded.roles.admin=administrator,developer

# Quarkus configuration
quarkus.log.level=INFO
quarkus.banner.enabled=false
quarkus.package.type=uber-jar
quarkus.docker.dockerfile-jvm-path=src/main/docker/Dockerfile.distroless
#quarkus.docker.dockerfile-jvm-path=src/main/docker/Dockerfile.legacy-jar

quarkus.container-image.builder=docker

quarkus.kubernetes-client.connection-timeout=2000
quarkus.kubernetes-client.request-timeout=10000
